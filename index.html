<!DOCTYPE html>
<html lang="en">
<head>
    <!-- [Previous head content remains exactly the same] -->
</head>
<body>
    <!-- [Previous HTML structure remains exactly the same until the script section] -->

    <script>
    // Enhanced Product Data with all categories
    const products = [
        // Home Decor (5 products)
        {
            id: 1,
            title: "Modern Ceramic Flower Vase",
            category: "home-decor",
            description: "Stylish centerpiece for living room with elegant design and premium ceramic construction.",
            price: 39.99,
            originalPrice: 49.99,
            rating: 4.5,
            reviews: [
                { name: "Sophia", text: "Absolutely beautiful! Looks stunning on my table.", avatar: "https://randomuser.me/api/portraits/women/1.jpg" },
                { name: "Olivia", text: "Great quality and fast delivery. Matches my decor perfectly.", avatar: "https://randomuser.me/api/portraits/women/2.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71eZbM7ADEL._AC_SL1500_.jpg",
            link: "https://amzn.to/3I8fYXJ",
            badge: "Bestseller"
        },
        {
            id: 2,
            title: "Luxury Wall Mounted LED Mirror",
            category: "home-decor",
            description: "Elegant touch LED mirror with adjustable lighting for perfect illumination.",
            price: 129.99,
            originalPrice: 159.99,
            rating: 4.7,
            reviews: [
                { name: "Emily", text: "Love the lighting effect. Worth every penny!", avatar: "https://randomuser.me/api/portraits/women/3.jpg" },
                { name: "Isabella", text: "Makes my room look premium and luxurious.", avatar: "https://randomuser.me/api/portraits/women/4.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71F4+QpMfWL._AC_SL1500_.jpg",
            link: "https://amzn.to/44chrox",
            badge: "Popular"
        },
        {
            id: 3,
            title: "Portable Humidifier Diffuser",
            category: "home-decor",
            description: "Aroma diffuser with 7 color LED lights for fresh and relaxing environment.",
            price: 29.99,
            originalPrice: 39.99,
            rating: 4.3,
            reviews: [
                { name: "James", text: "Super quiet and works great with essential oils.", avatar: "https://randomuser.me/api/portraits/men/1.jpg" },
                { name: "Lucas", text: "Perfect size for my bedroom. Love the colors.", avatar: "https://randomuser.me/api/portraits/men/2.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61U9OcC1QlL._AC_SL1500_.jpg",
            link: "https://amzn.to/44FgMvQ",
            badge: "New"
        },
        {
            id: 4,
            title: "Wall Mounted Wooden Shelves (Set of 3)",
            category: "home-decor",
            description: "Minimalist decor solution with sturdy construction and modern design.",
            price: 59.99,
            originalPrice: 79.99,
            rating: 4.6,
            reviews: [
                { name: "Amelia", text: "Very sturdy and easy to install. Looks amazing!", avatar: "https://randomuser.me/api/portraits/women/5.jpg" },
                { name: "Harper", text: "My plants look awesome on these shelves.", avatar: "https://randomuser.me/api/portraits/women/6.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61a+J0Ka0xL._AC_SL1500_.jpg",
            link: "https://amzn.to/4exwJYo",
            badge: ""
        },
        {
            id: 5,
            title: "Abstract Canvas Wall Art",
            category: "home-decor",
            description: "Perfect for modern wall styling with vibrant colors and premium canvas.",
            price: 79.99,
            originalPrice: 99.99,
            rating: 4.4,
            reviews: [
                { name: "Evelyn", text: "Colors are vibrant and quality is top-notch.", avatar: "https://randomuser.me/api/portraits/women/7.jpg" },
                { name: "Abigail", text: "Looks exactly like the pictures! Great addition to my living room.", avatar: "https://randomuser.me/api/portraits/women/8.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/81fL8Hgip-L._AC_SL1500_.jpg",
            link: "https://amzn.to/44vS3ZH",
            badge: "Sale"
        },

        // Fashion (5 products)
        {
            id: 6,
            title: "Trendy Crossbody Bag for Women",
            category: "fashion",
            description: "Lightweight and fashionable with multiple compartments and adjustable strap.",
            price: 39.99,
            originalPrice: 49.99,
            rating: 4.6,
            reviews: [
                { name: "Ava", text: "Perfect size for everyday use. Fits all my essentials!", avatar: "https://randomuser.me/api/portraits/women/9.jpg" },
                { name: "Mia", text: "The leather quality is amazing for the price.", avatar: "https://randomuser.me/api/portraits/women/10.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71Swqqe7XAL._AC_SL1500_.jpg",
            link: "https://amzn.to/40kF8Zx",
            badge: "Bestseller"
        },
        {
            id: 7,
            title: "Premium Women's Analog Watch",
            category: "fashion",
            description: "Stylish leather strap with rose gold case and water resistant design.",
            price: 59.99,
            originalPrice: 79.99,
            rating: 4.5,
            reviews: [
                { name: "Charlotte", text: "Gorgeous watch! Gets compliments every time I wear it.", avatar: "https://randomuser.me/api/portraits/women/11.jpg" },
                { name: "Luna", text: "Very comfortable and keeps perfect time.", avatar: "https://randomuser.me/api/portraits/women/12.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61Qw1YtXJVL._AC_SL1500_.jpg",
            link: "https://amzn.to/44bp52u",
            badge: "Popular"
        },
        {
            id: 8,
            title: "Unisex Oversized Hoodie",
            category: "fashion",
            description: "Soft fleece interior, available in 8 colors with kangaroo pocket.",
            price: 34.99,
            originalPrice: 44.99,
            rating: 4.7,
            reviews: [
                { name: "Ethan", text: "Extremely comfortable and warm. My new favorite hoodie!", avatar: "https://randomuser.me/api/portraits/men/3.jpg" },
                { name: "Noah", text: "Great quality fabric and perfect oversized fit.", avatar: "https://randomuser.me/api/portraits/men/4.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71X7I7a1mSL._AC_SL1500_.jpg",
            link: "https://amzn.to/3ImMMfu",
            badge: "New"
        },
        {
            id: 9,
            title: "Casual Sneakers for Men & Women",
            category: "fashion",
            description: "Comfortable memory foam insoles with breathable knit upper.",
            price: 49.99,
            originalPrice: 59.99,
            rating: 4.4,
            reviews: [
                { name: "Oliver", text: "Most comfortable sneakers I've ever worn!", avatar: "https://randomuser.me/api/portraits/men/5.jpg" },
                { name: "Elijah", text: "Great for walking all day. No blisters!", avatar: "https://randomuser.me/api/portraits/men/6.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61BGE6iu4AL._AC_SL1500_.jpg",
            link: "https://amzn.to/3TO5Ndh",
            badge: ""
        },
        {
            id: 10,
            title: "Smart Touch Winter Gloves",
            category: "fashion",
            description: "Touchscreen compatible fingertips with thermal insulation.",
            price: 19.99,
            originalPrice: 24.99,
            rating: 4.3,
            reviews: [
                { name: "Emma", text: "Actually works with my phone! Warm and functional.", avatar: "https://randomuser.me/api/portraits/women/13.jpg" },
                { name: "Avery", text: "Perfect fit and the touchscreen feature is a game changer.", avatar: "https://randomuser.me/api/portraits/women/14.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71N-9h0f8JL._AC_SL1500_.jpg",
            link: "https://amzn.to/4lEgkUx",
            badge: "Sale"
        },

        // Gadgets (5 products)
        {
            id: 11,
            title: "Wireless Bluetooth Earbuds",
            category: "gadgets",
            description: "Noise-cancelling with 30hr battery life and IPX7 waterproof rating.",
            price: 89.99,
            originalPrice: 119.99,
            rating: 4.8,
            reviews: [
                { name: "Michael", text: "Best sound quality I've experienced in wireless earbuds.", avatar: "https://randomuser.me/api/portraits/men/7.jpg" },
                { name: "Daniel", text: "Battery lasts forever and the noise cancellation is impressive.", avatar: "https://randomuser.me/api/portraits/men/8.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61U9OcC1QlL._AC_SL1500_.jpg",
            link: "https://amzn.to/4l04MuG",
            badge: "Bestseller"
        },
        {
            id: 12,
            title: "Mini Portable Projector",
            category: "gadgets",
            description: "1080p support with 100\" display and built-in speakers for home theater experience.",
            price: 129.99,
            originalPrice: 149.99,
            rating: 4.5,
            reviews: [
                { name: "Alexander", text: "Incredibly clear picture for such a small projector.", avatar: "https://randomuser.me/api/portraits/men/9.jpg" },
                { name: "William", text: "Perfect for movie nights in the backyard.", avatar: "https://randomuser.me/api/portraits/men/10.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71F4+QpMfWL._AC_SL1500_.jpg",
            link: "https://amzn.to/45KslD5",
            badge: "Popular"
        },
        {
            id: 13,
            title: "Smart LED Touch Lamp",
            category: "gadgets",
            description: "16 colors with dimmable brightness and USB charging port.",
            price: 39.99,
            originalPrice: 49.99,
            rating: 4.6,
            reviews: [
                { name: "Elizabeth", text: "Creates the perfect ambiance in my bedroom.", avatar: "https://randomuser.me/api/portraits/women/15.jpg" },
                { name: "Sofia", text: "Love how many color options there are. Very responsive touch controls.", avatar: "https://randomuser.me/api/portraits/women/16.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71eZbM7ADEL._AC_SL1500_.jpg",
            link: "https://amzn.to/3TQsmhu",
            badge: "New"
        },
        {
            id: 14,
            title: "Wireless Fast Charging Pad",
            category: "gadgets",
            description: "Qi-compatible 15W charging for smartphones and earbuds.",
            price: 29.99,
            originalPrice: 39.99,
            rating: 4.4,
            reviews: [
                { name: "Benjamin", text: "Charges my phone just as fast as wired charging.", avatar: "https://randomuser.me/api/portraits/men/11.jpg" },
                { name: "Henry", text: "Works perfectly through my phone case.", avatar: "https://randomuser.me/api/portraits/men/12.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61a+J0Ka0xL._AC_SL1500_.jpg",
            link: "https://amzn.to/44nxnmv",
            badge: ""
        },
        {
            id: 15,
            title: "Compact Power Bank 20000mAh",
            category: "gadgets",
            description: "PD 20W fast charging with dual USB ports and LED indicator.",
            price: 49.99,
            originalPrice: 59.99,
            rating: 4.7,
            reviews: [
                { name: "Sebastian", text: "Can charge my phone 4-5 times on a single charge.", avatar: "https://randomuser.me/api/portraits/men/13.jpg" },
                { name: "Jack", text: "Perfect size for travel and charges my devices super fast.", avatar: "https://randomuser.me/api/portraits/men/14.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/81fL8Hgip-L._AC_SL1500_.jpg",
            link: "https://amzn.to/46oiLWB",
            badge: "Sale"
        },

        // Kitchen (5 products)
        {
            id: 16,
            title: "Portable Blender Bottle",
            category: "kitchen",
            description: "20oz capacity with leak-proof lid and measurement markings.",
            price: 24.99,
            originalPrice: 29.99,
            rating: 4.5,
            reviews: [
                { name: "David", text: "Perfect for protein shakes after the gym. Doesn't leak!", avatar: "https://randomuser.me/api/portraits/men/15.jpg" },
                { name: "Joseph", text: "The blender ball actually works to mix everything smoothly.", avatar: "https://randomuser.me/api/portraits/men/16.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71N-9h0f8JL._AC_SL1500_.jpg",
            link: "https://amzn.to/4ntg7VG",
            badge: "Bestseller"
        },
        {
            id: 17,
            title: "Electric Milk Frother",
            category: "kitchen",
            description: "One-touch cappuccino/latte maker with 2 speed settings.",
            price: 19.99,
            originalPrice: 24.99,
            rating: 4.3,
            reviews: [
                { name: "Samuel", text: "Makes cafe-quality foam in seconds.", avatar: "https://randomuser.me/api/portraits/men/17.jpg" },
                { name: "Gabriel", text: "Easy to clean and works perfectly for my morning coffee.", avatar: "https://randomuser.me/api/portraits/men/18.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61BGE6iu4AL._AC_SL1500_.jpg",
            link: "https://amzn.to/4nshJz7",
            badge: "Popular"
        },
        {
            id: 18,
            title: "Silicone Cooking Utensils Set (11 pcs)",
            category: "kitchen",
            description: "Heat-resistant up to 450Â°F with non-scratch silicone heads.",
            price: 29.99,
            originalPrice: 39.99,
            rating: 4.7,
            reviews: [
                { name: "Anthony", text: "Doesn't melt or scratch my non-stick pans. Perfect set!", avatar: "https://randomuser.me/api/portraits/men/19.jpg" },
                { name: "Christopher", text: "Comes with every utensil you could need. Great quality.", avatar: "https://randomuser.me/api/portraits/men/20.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71X7I7a1mSL._AC_SL1500_.jpg",
            link: "https://amzn.to/4epqwO0",
            badge: "New"
        },
        {
            id: 19,
            title: "Digital Kitchen Scale",
            category: "kitchen",
            description: "0.1g precision up to 5kg with tare function and LCD display.",
            price: 15.99,
            originalPrice: 19.99,
            rating: 4.6,
            reviews: [
                { name: "Andrew", text: "Perfect for baking when precise measurements matter.", avatar: "https://randomuser.me/api/portraits/men/21.jpg" },
                { name: "Joshua", text: "Compact design but very accurate. Uses standard batteries.", avatar: "https://randomuser.me/api/portraits/men/22.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61Qw1YtXJVL._AC_SL1500_.jpg",
            link: "https://amzn.to/44hWeIk",
            badge: ""
        },
        {
            id: 20,
            title: "Non-stick Frying Pan with Lid",
            category: "kitchen",
            description: "PFOA-free ceramic coating with heat-resistant glass lid.",
            price: 39.99,
            originalPrice: 49.99,
            rating: 4.5,
            reviews: [
                { name: "Matthew", text: "Nothing sticks to this pan! Easy to clean.", avatar: "https://randomuser.me/api/portraits/men/23.jpg" },
                { name: "Ryan", text: "Heats evenly and the included lid is perfect for simmering.", avatar: "https://randomuser.me/api/portraits/men/24.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71Swqqe7XAL._AC_SL1500_.jpg",
            link: "https://amzn.to/44m2dvW",
            badge: "Sale"
        },

        // Beauty (5 products)
        {
            id: 21,
            title: "LED Vanity Mirror with Lights",
            category: "beauty",
            description: "3x/5x magnification with dimmer and natural daylight LEDs.",
            price: 59.99,
            originalPrice: 79.99,
            rating: 4.7,
            reviews: [
                { name: "Grace", text: "Game changer for doing my makeup! The lighting is perfect.", avatar: "https://randomuser.me/api/portraits/women/17.jpg" },
                { name: "Chloe", text: "Adjustable brightness is amazing for different lighting needs.", avatar: "https://randomuser.me/api/portraits/women/18.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71F4+QpMfWL._AC_SL1500_.jpg",
            link: "https://amzn.to/46jamDW",
            badge: "Bestseller"
        },
        {
            id: 22,
            title: "Electric Facial Cleanser Brush",
            category: "beauty",
            description: "6 brush heads for all skin types with waterproof design.",
            price: 39.99,
            originalPrice: 49.99,
            rating: 4.4,
            reviews: [
                { name: "Zoe", text: "My skin has never felt cleaner! Noticeable difference after one use.", avatar: "https://randomuser.me/api/portraits/women/19.jpg" },
                { name: "Riley", text: "Gentle enough for my sensitive skin but very effective.", avatar: "https://randomuser.me/api/portraits/women/20.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/71eZbM7ADEL._AC_SL1500_.jpg",
            link: "https://amzn.to/46kEZsy",
            badge: "Popular"
        },
        {
            id: 23,
            title: "Portable Hair Straightener Brush",
            category: "beauty",
            description: "2-in-1 straightener & volumizer with ceramic plates.",
            price: 49.99,
            originalPrice: 59.99,
            rating: 4.6,
            reviews: [
                { name: "Hannah", text: "Actually straightens and smooths my curly hair in minutes.", avatar: "https://randomuser.me/api/portraits/women/21.jpg" },
                { name: "Aria", text: "So much easier to use than a traditional flat iron.", avatar: "https://randomuser.me/api/portraits/women/22.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61a+J0Ka0xL._AC_SL1500_.jpg",
            link: "https://amzn.to/45LbkIZ",
            badge: "New"
        },
        {
            id: 24,
            title: "Essential Oil Diffuser with LED Lights",
            category: "beauty",
            description: "400ml capacity with auto shut-off and 7 color changing lights.",
            price: 29.99,
            originalPrice: 39.99,
            rating: 4.5,
            reviews: [
                { name: "Lily", text: "Makes my bedroom smell amazing and the lights create a relaxing vibe.", avatar: "https://randomuser.me/api/portraits/women/23.jpg" },
                { name: "Nora", text: "Perfect size for my office. Runs quietly for hours.", avatar: "https://randomuser.me/api/portraits/women/24.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/81fL8Hgip-L._AC_SL1500_.jpg",
            link: "https://amzn.to/4kgYwgQ",
            badge: ""
        },
        {
            id: 25,
            title: "Mini Skincare Fridge",
            category: "beauty",
            description: "4L capacity with USB power and quiet operation.",
            price: 69.99,
            originalPrice: 89.99,
            rating: 4.3,
            reviews: [
                { name: "Scarlett", text: "Keeps my serums and eye creams perfectly chilled.", avatar: "https://randomuser.me/api/portraits/women/25.jpg" },
                { name: "Victoria", text: "Adorable little fridge that fits perfectly on my vanity.", avatar: "https://randomuser.me/api/portraits/women/26.jpg" }
            ],
            image: "https://m.media-amazon.com/images/I/61U9OcC1QlL._AC_SL1500_.jpg",
            link: "https://amzn.to/4l8OD6r",
            badge: "Sale"
        }
    ];

    // DOM Elements
    const productGrid = document.getElementById('productGrid');
    const searchInput = document.getElementById('searchInput');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const filterLinks = document.querySelectorAll('.filter-link');
    const sortSelect = document.getElementById('sortSelect');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const navLinks = document.getElementById('navLinks');
    const stickyNav = document.getElementById('stickyNav');
    const backToTop = document.getElementById('backToTop');
    const productModal = document.getElementById('productModal');
    const modalContent = document.getElementById('modalContent');
    const closeModal = document.getElementById('closeModal');

    // Variables
    let currentCategory = 'all';
    let currentSort = 'default';
    let searchQuery = '';

    // Initialize the page
    document.addEventListener('DOMContentLoaded', () => {
        displayProducts(products);
        
        // Mobile menu toggle
        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
        
        // Filter buttons
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                filterAndSortProducts();
            });
        });
        
        // Filter links in nav
        filterLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                filterLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                currentCategory = link.dataset.category;
                filterAndSortProducts();
                navLinks.classList.remove('active');
            });
        });
        
        // Search input
        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value.toLowerCase();
            filterAndSortProducts();
        });
        
        // Sort select
        sortSelect.addEventListener('change', (e) => {
            currentSort = e.target.value;
            filterAndSortProducts();
        });
        
        // Sticky nav on scroll
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                stickyNav.classList.add('scrolled');
            } else {
                stickyNav.classList.remove('scrolled');
            }
            
            // Back to top button
            if (window.scrollY > 300) {
                backToTop.classList.add('active');
            } else {
                backToTop.classList.remove('active');
            }
        });
        
        // Back to top button
        backToTop.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Create floating particles
        createParticles();
    });

    // Display products
    function displayProducts(productsToDisplay) {
        loadingSpinner.style.display = 'block';
        productGrid.innerHTML = '';
        
        // Simulate loading delay
        setTimeout(() => {
            if (productsToDisplay.length === 0) {
                productGrid.innerHTML = '<p style="grid-column:1/-1;text-align:center;">No products found matching your criteria.</p>';
            } else {
                productsToDisplay.forEach((product, index) => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        ${product.badge ? `<span class="product-badge">${product.badge}</span>` : ''}
                        <div class="product-image-container">
                            <img src="${product.image}" alt="${product.title}" class="product-image">
                            <div class="quick-view" data-id="${product.id}">Quick View</div>
                        </div>
                        <div class="product-info">
                            <div class="product-category">${formatCategory(product.category)}</div>
                            <h3 class="product-title">${product.title}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-price">
                                $${product.price.toFixed(2)}
                                ${product.originalPrice ? `<span class="original-price">$${product.originalPrice.toFixed(2)}</span>` : ''}
                            </div>
                            <div class="product-rating">
                                <div class="stars">
                                    ${generateStarRating(product.rating)}
                                </div>
                                <span class="rating-count">${product.reviews.length} reviews</span>
                            </div>
                            <a href="${product.link}" target="_blank" class="product-btn">Shop Now</a>
                            <div class="product-reviews">
                                ${generateRecentReviews(product.reviews)}
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                    
                    // Add animation delay for staggered appearance
                    setTimeout(() => {
                        productCard.classList.add('visible');
                    }, index * 100);
                    
                    // Add quick view event listener
                    productCard.querySelector('.quick-view').addEventListener('click', () => {
                        showProductModal(product);
                    });
                });
            }
            loadingSpinner.style.display = 'none';
        }, 500);
    }

    // Filter and sort products
    function filterAndSortProducts() {
        let filteredProducts = [...products];
        
        // Filter by category
        if (currentCategory !== 'all') {
            filteredProducts = filteredProducts.filter(product => product.category === currentCategory);
        }
        
        // Filter by search query
        if (searchQuery) {
            filteredProducts = filteredProducts.filter(product => 
                product.title.toLowerCase().includes(searchQuery) || 
                product.description.toLowerCase().includes(searchQuery) ||
                product.category.toLowerCase().includes(searchQuery)
            );
        }
        
        // Sort products
        switch (currentSort) {
            case 'price-asc':
                filteredProducts.sort((a, b) => a.price - b.price);
                break;
            case 'price-desc':
                filteredProducts.sort((a, b) => b.price - a.price);
                break;
            case 'rating':
                filteredProducts.sort((a, b) => b.rating - a.rating);
                break;
            default:
                // Default sorting (original order)
                break;
        }
        
        displayProducts(filteredProducts);
    }

    // Show product modal
    function showProductModal(product) {
        modalContent.innerHTML = `
            <div class="modal-product">
                <div class="modal-image-container">
                    <img src="${product.image}" alt="${product.title}" class="modal-image">
                </div>
                <div class="modal-details">
                    <div class="product-category">${formatCategory(product.category)}</div>
                    <h2 class="modal-title">${product.title}</h2>
                    <div class="modal-rating">
                        <div class="stars">
                            ${generateStarRating(product.rating)}
                        </div>
                        <span class="rating-count">${product.reviews.length} reviews</span>
                    </div>
                    <div class="modal-price">
                        $${product.price.toFixed(2)}
                        ${product.originalPrice ? `<span class="original-price">$${product.originalPrice.toFixed(2)}</span>` : ''}
                    </div>
                    <p class="modal-description">${product.description}</p>
                    <div class="modal-reviews">
                        <h3>Customer Reviews</h3>
                        ${product.reviews.map(review => `
                            <div class="modal-review">
                                <div class="review-header">
                                    <img src="${review.avatar}" alt="${review.name}" class="review-avatar">
                                    <span class="review-name">${review.name}</span>
                                </div>
                                <p class="review-text">${review.text}</p>
                            </div>
                        `).join('')}
                    </div>
                    <a href="${product.link}" target="_blank" class="product-btn modal-btn">Shop Now on Amazon</a>
                </div>
            </div>
        `;
        productModal.classList.add('show');
        document.body.style.overflow = 'hidden';
        
        // Close modal when clicking outside content
        productModal.addEventListener('click', (e) => {
            if (e.target === productModal) {
                closeProductModal();
            }
        });
        
        // Close modal with button
        closeModal.addEventListener('click', closeProductModal);
    }

    function closeProductModal() {
        productModal.classList.remove('show');
        document.body.style.overflow = 'auto';
    }

    // Helper functions
    function formatCategory(category) {
        return category.split('-').map(word => 
            word.charAt(0).toUpperCase() + word.slice(1)
        ).join(' ');
    }
    
    function generateStarRating(rating) {
        let stars = '';
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        
        for (let i = 1; i <= 5; i++) {
            if (i <= fullStars) {
                stars += '<i class="fas fa-star"></i>';
            } else if (i === fullStars + 1 && hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            } else {
                stars += '<i class="far fa-star"></i>';
            }
        }
        
        return stars;
    }
    
    function generateRecentReviews(reviews) {
        return reviews.slice(0, 2).map(review => `
            <div class="review">
                <img src="${review.avatar}" alt="${review.name}" class="review-avatar">
                <div class="review-content">
                    <div class="review-name">${review.name}</div>
                    <div class="review-text">${review.text}</div>
                </div>
            </div>
        `).join('');
    }
    
    // Create floating particles
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        const particleCount = 30;
        
        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            
            // Random properties
            const size = Math.random() * 5 + 2;
            const posX = Math.random() * 100;
            const delay = Math.random() * 10;
            const duration = Math.random() * 20 + 10;
            
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.left = `${posX}%`;
            particle.style.animationDelay = `${delay}s`;
            particle.style.animationDuration = `${duration}s`;
            
            particlesContainer.appendChild(particle);
        }
    }
    </script>
</body>
</html>
